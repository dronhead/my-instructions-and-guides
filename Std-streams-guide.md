# Стандартные потоки и перенаправление ввода-вывода в Linux

В Linux процессы взаимодействуют с терминалом через три стандартных потока:

- **stdin (Standard Input, файловый дескриптор 0)** — поток ввода данных (по умолчанию: клавиатура).

- **stdout (Standard Output, файловый дескриптор 1)** — поток вывода результатов (по умолчанию: экран).

- **stderr (Standard Error, файловый дескриптор 2)** — поток вывода ошибок, предупреждениях и другой диагностической информации (по умолчанию: экран).

## Перенаправление вывода

### Перезапись

| `команда > файл`       | `stdout` в файл (перезаписать)           |

| `команда 2> файл`      | `stderr` в файл (перезаписать)           |

| `команда &> файл`      | `stdout` и `stderr` в файл (перезаписать)|

### Добавление

| `команда >> файл`      | `stdout` в конец файла                   |

| `команда 2>> файл`     | `stderr` в конец файла                   |

| `команда &>> файл`     | `stdout` и `stderr` в конец файла        |

**Примеры:**

```bash

ls > files.txt            # Записать список файлов в files.txt

ls /not_exist 2> errors.log # Записать ошибку в errors.log

echo "Добавить" >> log.txt # Добавить строку в log.txt

```

## Перенаправление ввода

| `команда < файл`       | Передаёт содержимое файла во входной поток (`stdin`) команды.                  |

| `команда << MARKER`    | Позволяет вручную написать многострочный текст, который будет подан на вход (stdin) команде. Ввод продолжается, пока не встретится строка с маркером (`MARKER`). |

| `команда <<< "строка"` | Передаёт одну строку напрямую в `stdin`. |

**Примеры:**

```bash

sort < data.txt          # Сортировать данные из data.txt

grep "text" <<< "Пример текста" # Искать в строке

```

## Комбинирование потоков

### Объединение stderr в stdout

```bash

команда 2>&1            # Объединить stderr в stdout

команда > output.log 2>&1 # Перенаправить оба потока в файл (порядок важен!)

```

### Разделение stdout и stderr

```bash

команда > output.log 2> error.log

```

### Конвейер (pipe)

```bash

команда1 | команда2      # stdout команды1 -> stdin команды2

```

## Полезные утилиты

### tee: дублирование вывода

Команда tee в Linux — это мощный инструмент, который позволяет одновременно записывать вывод команды как в стандартный вывод (stdout), так и в один или несколько файлов. Это особенно полезно, когда нужно сохранить вывод команды для дальнейшей обработки или анализа, а также отобразить его в терминале.

```bash

команда | tee файл.log   # Вывод на экран и в файл

```

### /dev/null: "чёрная дыра"

```bash

команда > /dev/null      # Игнорировать stdout

команда 2> /dev/null     # Игнорировать stderr

```

### Перезапись vs Добавление

- `>` — перезаписать файл.

- `>>` — добавить в конец файла.